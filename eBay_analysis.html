<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="MISY 441-172">
<meta name="dcterms.date" content="2026-01-12">

<title>eBay Auction Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="eBay_analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="eBay_analysis_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="eBay_analysis_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="eBay_analysis_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="eBay_analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="eBay_analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="eBay_analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="eBay_analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="eBay_analysis_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="eBay_analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="eBay_analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="eBay_analysis_files/libs/bootstrap/bootstrap-4d7f0bce1131f3e5f9547cd857cfbfc8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#quick-navigation" id="toc-quick-navigation" class="nav-link active" data-scroll-target="#quick-navigation">Quick Navigation</a></li>
  <li><a href="#business-problem" id="toc-business-problem" class="nav-link" data-scroll-target="#business-problem">Business Problem</a></li>
  <li><a href="#part-a-import-packages-and-load-data" id="toc-part-a-import-packages-and-load-data" class="nav-link" data-scroll-target="#part-a-import-packages-and-load-data">Part a: Import Packages and Load Data</a></li>
  <li><a href="#part-b-observe-variables-in-the-dataset" id="toc-part-b-observe-variables-in-the-dataset" class="nav-link" data-scroll-target="#part-b-observe-variables-in-the-dataset">Part b: Observe Variables in the Dataset</a></li>
  <li><a href="#part-c-explore-categorical-variables-vs-competitive-auctions" id="toc-part-c-explore-categorical-variables-vs-competitive-auctions" class="nav-link" data-scroll-target="#part-c-explore-categorical-variables-vs-competitive-auctions">Part c: Explore Categorical Variables vs Competitive Auctions</a>
  <ul class="collapse">
  <li><a href="#category-analysis" id="toc-category-analysis" class="nav-link" data-scroll-target="#category-analysis">Category Analysis</a></li>
  <li><a href="#currency-analysis" id="toc-currency-analysis" class="nav-link" data-scroll-target="#currency-analysis">Currency Analysis</a></li>
  <li><a href="#end-day-analysis" id="toc-end-day-analysis" class="nav-link" data-scroll-target="#end-day-analysis">End Day Analysis</a></li>
  <li><a href="#duration-analysis" id="toc-duration-analysis" class="nav-link" data-scroll-target="#duration-analysis">Duration Analysis</a></li>
  </ul></li>
  <li><a href="#part-d-class-balance-analysis" id="toc-part-d-class-balance-analysis" class="nav-link" data-scroll-target="#part-d-class-balance-analysis">Part d: Class Balance Analysis</a></li>
  <li><a href="#part-d2-opening-price-distribution-analysis" id="toc-part-d2-opening-price-distribution-analysis" class="nav-link" data-scroll-target="#part-d2-opening-price-distribution-analysis">Part d2: Opening Price Distribution Analysis</a>
  <ul class="collapse">
  <li><a href="#opening-price-distribution-by-category" id="toc-opening-price-distribution-by-category" class="nav-link" data-scroll-target="#opening-price-distribution-by-category">Opening Price Distribution by Category</a></li>
  <li><a href="#opening-price-distribution-by-auction-duration" id="toc-opening-price-distribution-by-auction-duration" class="nav-link" data-scroll-target="#opening-price-distribution-by-auction-duration">Opening Price Distribution by Auction Duration</a></li>
  <li><a href="#opening-price-distribution-by-end-day" id="toc-opening-price-distribution-by-end-day" class="nav-link" data-scroll-target="#opening-price-distribution-by-end-day">Opening Price Distribution by End Day</a></li>
  <li><a href="#opening-price-distribution-by-currency" id="toc-opening-price-distribution-by-currency" class="nav-link" data-scroll-target="#opening-price-distribution-by-currency">Opening Price Distribution by Currency</a></li>
  <li><a href="#combined-violin-plot-opening-price-by-category-and-competitive-status" id="toc-combined-violin-plot-opening-price-by-category-and-competitive-status" class="nav-link" data-scroll-target="#combined-violin-plot-opening-price-by-category-and-competitive-status">Combined Violin Plot: Opening Price by Category and Competitive Status</a></li>
  <li><a href="#key-observations-from-opening-price-distribution" id="toc-key-observations-from-opening-price-distribution" class="nav-link" data-scroll-target="#key-observations-from-opening-price-distribution">Key Observations from Opening Price Distribution</a></li>
  </ul></li>
  <li><a href="#part-e-converting-variables-to-category-type" id="toc-part-e-converting-variables-to-category-type" class="nav-link" data-scroll-target="#part-e-converting-variables-to-category-type">Part e: Converting Variables to Category Type</a></li>
  <li><a href="#part-f-creating-dummy-variables" id="toc-part-f-creating-dummy-variables" class="nav-link" data-scroll-target="#part-f-creating-dummy-variables">Part f: Creating Dummy Variables</a></li>
  <li><a href="#part-g-outlier-analysis" id="toc-part-g-outlier-analysis" class="nav-link" data-scroll-target="#part-g-outlier-analysis">Part g: Outlier Analysis</a></li>
  <li><a href="#part-h-data-partitioning-60-train-40-test" id="toc-part-h-data-partitioning-60-train-40-test" class="nav-link" data-scroll-target="#part-h-data-partitioning-60-train-40-test">Part h: Data Partitioning (60% Train / 40% Test)</a></li>
  <li><a href="#modeling-part-1-logistic-regression-with-all-variables" id="toc-modeling-part-1-logistic-regression-with-all-variables" class="nav-link" data-scroll-target="#modeling-part-1-logistic-regression-with-all-variables">Modeling Part 1: Logistic Regression with ALL Variables</a></li>
  <li><a href="#modeling-part-2-confusion-matrix-and-accuracy" id="toc-modeling-part-2-confusion-matrix-and-accuracy" class="nav-link" data-scroll-target="#modeling-part-2-confusion-matrix-and-accuracy">Modeling Part 2: Confusion Matrix and Accuracy</a></li>
  <li><a href="#modeling-part-3-challenge-of-using-closeprice" id="toc-modeling-part-3-challenge-of-using-closeprice" class="nav-link" data-scroll-target="#modeling-part-3-challenge-of-using-closeprice">Modeling Part 3: Challenge of Using ClosePrice</a>
  <ul class="collapse">
  <li><a href="#key-issues" id="toc-key-issues" class="nav-link" data-scroll-target="#key-issues">Key Issues:</a></li>
  </ul></li>
  <li><a href="#modeling-part-4-model-without-closeprice" id="toc-modeling-part-4-model-without-closeprice" class="nav-link" data-scroll-target="#modeling-part-4-model-without-closeprice">Modeling Part 4: Model WITHOUT ClosePrice</a></li>
  <li><a href="#summary-of-key-findings" id="toc-summary-of-key-findings" class="nav-link" data-scroll-target="#summary-of-key-findings">Summary of Key Findings</a>
  <ul class="collapse">
  <li><a href="#q1-which-category-has-the-most-competitive-auctions-which-day-of-week" id="toc-q1-which-category-has-the-most-competitive-auctions-which-day-of-week" class="nav-link" data-scroll-target="#q1-which-category-has-the-most-competitive-auctions-which-day-of-week">Q1: Which category has the most competitive auctions? Which day of week?</a></li>
  <li><a href="#q2-what-percentage-of-auctions-are-competitive" id="toc-q2-what-percentage-of-auctions-are-competitive" class="nav-link" data-scroll-target="#q2-what-percentage-of-auctions-are-competitive">Q2: What percentage of auctions are competitive?</a></li>
  <li><a href="#q3-is-there-an-imbalance-problem" id="toc-q3-is-there-an-imbalance-problem" class="nav-link" data-scroll-target="#q3-is-there-an-imbalance-problem">Q3: Is there an imbalance problem?</a></li>
  <li><a href="#q4-q7-model-accuracy-comparison" id="toc-q4-q7-model-accuracy-comparison" class="nav-link" data-scroll-target="#q4-q7-model-accuracy-comparison">Q4-Q7: Model Accuracy Comparison</a></li>
  <li><a href="#q8-change-in-accuracy-between-with-and-without-closeprice" id="toc-q8-change-in-accuracy-between-with-and-without-closeprice" class="nav-link" data-scroll-target="#q8-change-in-accuracy-between-with-and-without-closeprice">Q8: Change in accuracy between with and without ClosePrice</a></li>
  <li><a href="#summary-table" id="toc-summary-table" class="nav-link" data-scroll-target="#summary-table">Summary Table</a></li>
  </ul></li>
  <li><a href="#summary-answers-to-questions" id="toc-summary-answers-to-questions" class="nav-link" data-scroll-target="#summary-answers-to-questions">Summary Answers to Questions</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a>
  <ul class="collapse">
  <li><a href="#advantages-of-removing-closeprice" id="toc-advantages-of-removing-closeprice" class="nav-link" data-scroll-target="#advantages-of-removing-closeprice">Advantages of Removing ClosePrice</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">eBay Auction Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>MISY 441-172 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 12, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="quick-navigation" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="quick-navigation">Quick Navigation</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Data Exploration</strong></th>
<th style="text-align: left;"><strong>Data Preparation</strong></th>
<th style="text-align: left;"><strong>Modeling</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#business-problem">Business Problem</a></td>
<td style="text-align: left;"><a href="#part-e-converting-variables-to-category-type">Part e: Convert to Category</a></td>
<td style="text-align: left;"><a href="#modeling-part-1-logistic-regression-with-all-variables">Model 1: All Variables</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#part-a-import-packages-and-load-data">Part a: Load Data</a></td>
<td style="text-align: left;"><a href="#part-f-creating-dummy-variables">Part f: Dummy Variables</a></td>
<td style="text-align: left;"><a href="#modeling-part-2-confusion-matrix-and-accuracy">Model 2: Confusion Matrix</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#part-b-observe-variables-in-the-dataset">Part b: Observe Variables</a></td>
<td style="text-align: left;"><a href="#part-g-outlier-analysis">Part g: Outlier Analysis</a></td>
<td style="text-align: left;"><a href="#modeling-part-3-challenge-of-using-closeprice">Model 3: ClosePrice Challenge</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#part-c-explore-categorical-variables-vs-competitive-auctions">Part c: Categorical Analysis</a></td>
<td style="text-align: left;"><a href="#part-h-data-partitioning-60-train-40-test">Part h: Data Partitioning</a></td>
<td style="text-align: left;"><a href="#modeling-part-4-model-without-closeprice">Model 4: Without ClosePrice</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#part-d-class-balance-analysis">Part d: Class Balance</a></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="#summary-of-key-findings">Key Findings</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#part-d2-opening-price-distribution-analysis">Part d2: Opening Price Distribution</a></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="#summary-answers-to-questions"><strong>Summary Answers</strong></a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"><a href="#conclusion">Conclusion</a></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="business-problem" class="level2">
<h2 class="anchored" data-anchor-id="business-problem">Business Problem</h2>
<p>The file <code>eBayAuctions.csv</code> contains information on 1972 auctions transacted on eBay.com during May-June 2004. The goal is to use these data to build a model that will distinguish competitive auctions from noncompetitive ones.</p>
<p>A <strong>competitive auction</strong> is defined as an auction with at least two bids placed on the item being auctioned.</p>
</section>
<section id="part-a-import-packages-and-load-data" class="level2">
<h2 class="anchored" data-anchor-id="part-a-import-packages-and-load-data">Part a: Import Packages and Load Data</h2>
<div id="3381ac6e" class="cell" data-execution_count="1">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sklearn <span class="im">as</span> sk</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score, confusion_matrix, classification_report</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the dataset</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>ebay_df <span class="op">=</span> pd.read_csv(<span class="st">'eBayAuctions.csv'</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Dataset loaded: </span><span class="sc">{</span>ebay_df<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> rows, </span><span class="sc">{</span>ebay_df<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> columns"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">First 5 rows of the dataset:"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>ebay_df.head()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dataset loaded: 1972 rows, 8 columns

First 5 rows of the dataset:</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Category</th>
<th data-quarto-table-cell-role="th">currency</th>
<th data-quarto-table-cell-role="th">sellerRating</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">endDay</th>
<th data-quarto-table-cell-role="th">ClosePrice</th>
<th data-quarto-table-cell-role="th">OpenPrice</th>
<th data-quarto-table-cell-role="th">Competitive</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Music/Movie/Game</td>
<td>US</td>
<td>3249</td>
<td>5</td>
<td>Mon</td>
<td>0.01</td>
<td>0.01</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Music/Movie/Game</td>
<td>US</td>
<td>3249</td>
<td>5</td>
<td>Mon</td>
<td>0.01</td>
<td>0.01</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Music/Movie/Game</td>
<td>US</td>
<td>3249</td>
<td>5</td>
<td>Mon</td>
<td>0.01</td>
<td>0.01</td>
<td>0</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Music/Movie/Game</td>
<td>US</td>
<td>3249</td>
<td>5</td>
<td>Mon</td>
<td>0.01</td>
<td>0.01</td>
<td>0</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Music/Movie/Game</td>
<td>US</td>
<td>3249</td>
<td>5</td>
<td>Mon</td>
<td>0.01</td>
<td>0.01</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="part-b-observe-variables-in-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="part-b-observe-variables-in-the-dataset">Part b: Observe Variables in the Dataset</h2>
<div id="636f5c10" class="cell" data-execution_count="2">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Data Types ---"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ebay_df.dtypes)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Data Types ---
Category         object
currency         object
sellerRating      int64
Duration          int64
endDay           object
ClosePrice      float64
OpenPrice       float64
Competitive       int64
dtype: object</code></pre>
</div>
</div>
<div id="1bacf943" class="cell" data-execution_count="3">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Summary Statistics ---"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>ebay_df.describe()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Summary Statistics ---</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">sellerRating</th>
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th">ClosePrice</th>
<th data-quarto-table-cell-role="th">OpenPrice</th>
<th data-quarto-table-cell-role="th">Competitive</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">count</th>
<td>1972.000000</td>
<td>1972.000000</td>
<td>1972.000000</td>
<td>1972.000000</td>
<td>1972.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">mean</th>
<td>3560.238337</td>
<td>6.486308</td>
<td>36.449087</td>
<td>12.926268</td>
<td>0.540568</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">std</th>
<td>5973.011033</td>
<td>2.052906</td>
<td>89.493858</td>
<td>38.856149</td>
<td>0.498478</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">min</th>
<td>0.000000</td>
<td>1.000000</td>
<td>0.010000</td>
<td>0.010000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">25%</th>
<td>595.000000</td>
<td>5.000000</td>
<td>4.907500</td>
<td>1.230000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">50%</th>
<td>1853.000000</td>
<td>7.000000</td>
<td>9.995000</td>
<td>4.500000</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">75%</th>
<td>3380.000000</td>
<td>7.000000</td>
<td>28.000000</td>
<td>9.990000</td>
<td>1.000000</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">max</th>
<td>37727.000000</td>
<td>10.000000</td>
<td>999.000000</td>
<td>999.000000</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="8d4b642c" class="cell" data-execution_count="4">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Info about the dataset ---"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ebay_df.info()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Info about the dataset ---
&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1972 entries, 0 to 1971
Data columns (total 8 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   Category      1972 non-null   object 
 1   currency      1972 non-null   object 
 2   sellerRating  1972 non-null   int64  
 3   Duration      1972 non-null   int64  
 4   endDay        1972 non-null   object 
 5   ClosePrice    1972 non-null   float64
 6   OpenPrice     1972 non-null   float64
 7   Competitive   1972 non-null   int64  
dtypes: float64(2), int64(3), object(3)
memory usage: 123.4+ KB</code></pre>
</div>
</div>
</section>
<section id="part-c-explore-categorical-variables-vs-competitive-auctions" class="level2">
<h2 class="anchored" data-anchor-id="part-c-explore-categorical-variables-vs-competitive-auctions">Part c: Explore Categorical Variables vs Competitive Auctions</h2>
<section id="category-analysis" class="level3">
<h3 class="anchored" data-anchor-id="category-analysis">Category Analysis</h3>
<div id="362b49a4" class="cell" data-execution_count="5">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Competitive Auctions by Category ---"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>category_competitive <span class="op">=</span> ebay_df.groupby(<span class="st">'Category'</span>)[<span class="st">'Competitive'</span>].agg([<span class="st">'mean'</span>, <span class="st">'count'</span>])</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>category_competitive <span class="op">=</span> category_competitive.sort_values(<span class="st">'mean'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(category_competitive)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Category with MOST competitive auctions: </span><span class="sc">{</span>category_competitive[<span class="st">'mean'</span>]<span class="sc">.</span>idxmax()<span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(</span><span class="sc">{</span>category_competitive[<span class="st">'mean'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2%}</span><span class="ss"> competitive rate)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Competitive Auctions by Category ---
                          mean  count
Category                             
Photography           0.846154     13
Electronics           0.800000     55
SportingGoods         0.725806    124
Business/Industrial   0.666667     18
Computer              0.666667     36
Home/Garden           0.656863    102
Music/Movie/Game      0.602978    403
Collectibles          0.577406    239
Antique/Art/Craft     0.564972    177
Toys/Hobbies          0.529915    234
Clothing/Accessories  0.504202    119
Books                 0.500000     54
Jewelry               0.365854     82
Automotive            0.353933    178
Pottery/Glass         0.350000     20
Coins/Stamps          0.297297     37
EverythingElse        0.235294     17
Health/Beauty         0.171875     64

Category with MOST competitive auctions: Photography (84.62% competitive rate)</code></pre>
</div>
</div>
</section>
<section id="currency-analysis" class="level3">
<h3 class="anchored" data-anchor-id="currency-analysis">Currency Analysis</h3>
<div id="dcdd77ce" class="cell" data-execution_count="6">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Competitive Auctions by Currency ---"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>currency_competitive <span class="op">=</span> ebay_df.groupby(<span class="st">'currency'</span>)[<span class="st">'Competitive'</span>].agg([<span class="st">'mean'</span>, <span class="st">'count'</span>])</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>currency_competitive</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Competitive Auctions by Currency ---</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">currency</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">EUR</th>
<td>0.551595</td>
<td>533</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">GBP</th>
<td>0.687075</td>
<td>147</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">US</th>
<td>0.519350</td>
<td>1292</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="end-day-analysis" class="level3">
<h3 class="anchored" data-anchor-id="end-day-analysis">End Day Analysis</h3>
<div id="5ae26167" class="cell" data-execution_count="7">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Competitive Auctions by End Day ---"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>endday_competitive <span class="op">=</span> ebay_df.groupby(<span class="st">'endDay'</span>)[<span class="st">'Competitive'</span>].agg([<span class="st">'mean'</span>, <span class="st">'count'</span>])</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>endday_competitive <span class="op">=</span> endday_competitive.sort_values(<span class="st">'mean'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(endday_competitive)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Day with MOST competitive auctions: </span><span class="sc">{</span>endday_competitive[<span class="st">'mean'</span>]<span class="sc">.</span>idxmax()<span class="sc">}</span><span class="ss"> "</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"(</span><span class="sc">{</span>endday_competitive[<span class="st">'mean'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2%}</span><span class="ss"> competitive rate)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Competitive Auctions by End Day ---
            mean  count
endDay                 
Mon     0.673358    548
Thu     0.603960    202
Tue     0.532164    171
Sun     0.485207    338
Wed     0.480000     75
Fri     0.466899    287
Sat     0.427350    351

Day with MOST competitive auctions: Mon (67.34% competitive rate)</code></pre>
</div>
</div>
</section>
<section id="duration-analysis" class="level3">
<h3 class="anchored" data-anchor-id="duration-analysis">Duration Analysis</h3>
<div id="96364c34" class="cell" data-execution_count="8">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Competitive Auctions by Duration ---"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>duration_competitive <span class="op">=</span> ebay_df.groupby(<span class="st">'Duration'</span>)[<span class="st">'Competitive'</span>].agg([<span class="st">'mean'</span>, <span class="st">'count'</span>])</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>duration_competitive</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Competitive Auctions by Duration ---</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">count</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Duration</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">1</th>
<td>0.521739</td>
<td>23</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>0.450704</td>
<td>213</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">5</th>
<td>0.686695</td>
<td>466</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>0.489142</td>
<td>967</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">10</th>
<td>0.544554</td>
<td>303</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="part-d-class-balance-analysis" class="level2">
<h2 class="anchored" data-anchor-id="part-d-class-balance-analysis">Part d: Class Balance Analysis</h2>
<p>What percentage of auctions are competitive? Is there an imbalance problem?</p>
<div id="ab73e32d" class="cell" data-execution_count="9">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>competitive_counts <span class="op">=</span> ebay_df.groupby(<span class="st">'Competitive'</span>)[<span class="st">'Competitive'</span>].agg([<span class="st">'count'</span>])</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Count of Competitive vs Non-Competitive Auctions ---"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(competitive_counts)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>total <span class="op">=</span> competitive_counts[<span class="st">'count'</span>].<span class="bu">sum</span>()</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>competitive_pct <span class="op">=</span> competitive_counts.loc[<span class="dv">1</span>, <span class="st">'count'</span>] <span class="op">/</span> total <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>non_competitive_pct <span class="op">=</span> competitive_counts.loc[<span class="dv">0</span>, <span class="st">'count'</span>] <span class="op">/</span> total <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Competitive auctions: </span><span class="sc">{</span>competitive_pct<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Non-competitive auctions: </span><span class="sc">{</span>non_competitive_pct<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">abs</span>(competitive_pct <span class="op">-</span> <span class="dv">50</span>) <span class="op">&gt;</span> <span class="dv">10</span>:</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">⚠️  There appears to be a CLASS IMBALANCE issue."</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   The classes are not evenly distributed (</span><span class="sc">{</span>competitive_pct<span class="sc">:.1f}</span><span class="ss">% vs </span><span class="sc">{</span>non_competitive_pct<span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">✓ The classes are relatively balanced."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Count of Competitive vs Non-Competitive Auctions ---
             count
Competitive       
0              906
1             1066

Competitive auctions: 54.06%
Non-competitive auctions: 45.94%

✓ The classes are relatively balanced.</code></pre>
</div>
</div>
<div id="c9eb74b4" class="cell" data-execution_count="10">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot: Distribution of OpenPrice by Competitive Status (outliers removed)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove outliers using IQR method</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>Q1 <span class="op">=</span> ebay_df[<span class="st">'OpenPrice'</span>].quantile(<span class="fl">0.25</span>)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>Q3 <span class="op">=</span> ebay_df[<span class="st">'OpenPrice'</span>].quantile(<span class="fl">0.75</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>lower_bound <span class="op">=</span> Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>upper_bound <span class="op">=</span> Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data to remove outliers</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>ebay_filtered <span class="op">=</span> ebay_df[(ebay_df[<span class="st">'OpenPrice'</span>] <span class="op">&gt;=</span> lower_bound) <span class="op">&amp;</span> (ebay_df[<span class="st">'OpenPrice'</span>] <span class="op">&lt;=</span> upper_bound)].copy()</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Removed </span><span class="sc">{</span><span class="bu">len</span>(ebay_df) <span class="op">-</span> <span class="bu">len</span>(ebay_filtered)<span class="sc">}</span><span class="ss"> outliers from </span><span class="sc">{</span><span class="bu">len</span>(ebay_df)<span class="sc">}</span><span class="ss"> records"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create labels for the filtered data</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>ebay_filtered[<span class="st">'Competitive_Label'</span>] <span class="op">=</span> ebay_filtered[<span class="st">'Competitive'</span>].<span class="bu">map</span>({<span class="dv">0</span>: <span class="st">'Non-Competitive'</span>, <span class="dv">1</span>: <span class="st">'Competitive'</span>})</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'Competitive_Label'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, data<span class="op">=</span>ebay_filtered, </span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>               hue<span class="op">=</span><span class="st">'Competitive_Label'</span>, palette<span class="op">=</span>[<span class="st">'#E74C3C'</span>, <span class="st">'#27AE60'</span>], inner<span class="op">=</span><span class="st">'box'</span>, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Auction Type'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price ($)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Opening Price: Competitive vs Non-Competitive Auctions</span><span class="ch">\n</span><span class="st">(Outliers Removed)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Removed 206 outliers from 1972 records</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-11-output-2.png" width="951" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="part-d2-opening-price-distribution-analysis" class="level2">
<h2 class="anchored" data-anchor-id="part-d2-opening-price-distribution-analysis">Part d2: Opening Price Distribution Analysis</h2>
<p>This section provides a comprehensive analysis of the Opening Price distribution using violin plots to understand how opening prices vary across different auction characteristics.</p>
<section id="opening-price-distribution-by-category" class="level3">
<h3 class="anchored" data-anchor-id="opening-price-distribution-by-category">Opening Price Distribution by Category</h3>
<div id="9e995dc8" class="cell" data-execution_count="11">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot: Opening Price Distribution by Category</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">6</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a color palette for categories</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> ebay_df[<span class="st">'Category'</span>].unique()</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>palette <span class="op">=</span> sns.color_palette(<span class="st">"husl"</span>, <span class="bu">len</span>(categories))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'Category'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, data<span class="op">=</span>ebay_df, </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>               hue<span class="op">=</span><span class="st">'Category'</span>, palette<span class="op">=</span>palette, inner<span class="op">=</span><span class="st">'quartile'</span>, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Category'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price ($)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Opening Price by Category'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by category</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Opening Price Statistics by Category ---"</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>category_stats <span class="op">=</span> ebay_df.groupby(<span class="st">'Category'</span>)[<span class="st">'OpenPrice'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>, <span class="st">'std'</span>, <span class="st">'min'</span>, <span class="st">'max'</span>])</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>category_stats <span class="op">=</span> category_stats.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(category_stats.sort_values(<span class="st">'median'</span>, ascending<span class="op">=</span><span class="va">False</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-12-output-1.png" width="1329" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Opening Price Statistics by Category ---
                       mean  median     std   min     max
Category                                                 
Automotive            55.55   24.95  107.26  0.01  999.00
Jewelry               10.13   10.50    6.57  0.01   24.95
Pottery/Glass         47.61    9.99   51.20  1.77  159.99
Photography           17.96    9.99   24.06  0.50   90.00
EverythingElse         9.04    9.95    8.77  0.99   39.99
Health/Beauty          8.02    6.99    5.09  2.45   29.99
Clothing/Accessories   7.74    6.14    8.09  0.54   67.64
Collectibles           8.30    4.99   19.87  0.01  219.00
Toys/Hobbies          10.84    4.99   14.70  0.01   99.99
Antique/Art/Craft      6.07    3.60   13.68  0.60  169.55
Coins/Stamps          25.08    3.55   46.89  0.77  192.00
Books                  7.85    3.49   15.93  0.01   99.99
Business/Industrial   13.97    3.35   25.08  0.01  100.00
Electronics           17.12    2.45   37.34  0.01  199.99
SportingGoods          8.21    2.45   19.72  0.01  200.00
Home/Garden            5.93    2.45    7.54  0.01   50.00
Music/Movie/Game       4.83    1.76    8.21  0.01   59.99
Computer               8.08    1.23   24.75  0.99  150.00</code></pre>
</div>
</div>
</section>
<section id="opening-price-distribution-by-auction-duration" class="level3">
<h3 class="anchored" data-anchor-id="opening-price-distribution-by-auction-duration">Opening Price Distribution by Auction Duration</h3>
<div id="c363f659" class="cell" data-execution_count="12">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot: Opening Price Distribution by Duration</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>duration_palette <span class="op">=</span> {<span class="st">'1'</span>: <span class="st">'#3498DB'</span>, <span class="st">'3'</span>: <span class="st">'#E74C3C'</span>, <span class="st">'5'</span>: <span class="st">'#2ECC71'</span>, <span class="st">'7'</span>: <span class="st">'#9B59B6'</span>, <span class="st">'10'</span>: <span class="st">'#F39C12'</span>}</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>durations <span class="op">=</span> <span class="bu">sorted</span>(ebay_df[<span class="st">'Duration'</span>].unique())</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'Duration'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, data<span class="op">=</span>ebay_df, </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>               hue<span class="op">=</span><span class="st">'Duration'</span>, palette<span class="op">=</span><span class="st">'viridis'</span>, inner<span class="op">=</span><span class="st">'quartile'</span>, order<span class="op">=</span>durations, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Auction Duration (Days)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price ($)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Opening Price by Auction Duration'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by duration</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Opening Price Statistics by Duration ---"</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>duration_stats <span class="op">=</span> ebay_df.groupby(<span class="st">'Duration'</span>)[<span class="st">'OpenPrice'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>, <span class="st">'std'</span>, <span class="st">'count'</span>])</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>duration_stats <span class="op">=</span> duration_stats.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(duration_stats)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-13-output-1.png" width="951" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Opening Price Statistics by Duration ---
           mean  median    std  count
Duration                             
1         12.57    5.00  20.93     23
3         20.72    9.99  34.23    213
5         13.56    1.23  41.31    466
7         13.06    4.99  43.68    967
10         6.08    2.45  13.37    303</code></pre>
</div>
</div>
</section>
<section id="opening-price-distribution-by-end-day" class="level3">
<h3 class="anchored" data-anchor-id="opening-price-distribution-by-end-day">Opening Price Distribution by End Day</h3>
<div id="536bf7d7" class="cell" data-execution_count="13">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot: Opening Price Distribution by End Day</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>day_order <span class="op">=</span> [<span class="st">'Mon'</span>, <span class="st">'Tue'</span>, <span class="st">'Wed'</span>, <span class="st">'Thu'</span>, <span class="st">'Fri'</span>, <span class="st">'Sat'</span>, <span class="st">'Sun'</span>]</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>days_in_data <span class="op">=</span> [d <span class="cf">for</span> d <span class="kw">in</span> day_order <span class="cf">if</span> d <span class="kw">in</span> ebay_df[<span class="st">'endDay'</span>].values]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">6</span>))</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'endDay'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, data<span class="op">=</span>ebay_df, </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>               hue<span class="op">=</span><span class="st">'endDay'</span>, palette<span class="op">=</span><span class="st">'coolwarm'</span>, inner<span class="op">=</span><span class="st">'quartile'</span>, order<span class="op">=</span>days_in_data, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'End Day of Week'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price ($)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Opening Price by Auction End Day'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by end day</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Opening Price Statistics by End Day ---"</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>endday_stats <span class="op">=</span> ebay_df.groupby(<span class="st">'endDay'</span>)[<span class="st">'OpenPrice'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>, <span class="st">'std'</span>, <span class="st">'count'</span>])</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>endday_stats <span class="op">=</span> endday_stats.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(endday_stats.loc[days_in_data])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-14-output-1.png" width="1143" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Opening Price Statistics by End Day ---
         mean  median    std  count
endDay                             
Mon      8.21    2.45  29.07    548
Tue     12.66    4.90  23.36    171
Wed      6.15    2.45  14.42     75
Thu      5.57    2.34  12.87    202
Fri     18.52    6.95  48.62    287
Sat     17.04    6.50  60.79    351
Sun     17.60    7.99  32.40    338</code></pre>
</div>
</div>
</section>
<section id="opening-price-distribution-by-currency" class="level3">
<h3 class="anchored" data-anchor-id="opening-price-distribution-by-currency">Opening Price Distribution by Currency</h3>
<div id="ca354e38" class="cell" data-execution_count="14">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Violin plot: Opening Price Distribution by Currency</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'currency'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, data<span class="op">=</span>ebay_df, </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>               hue<span class="op">=</span><span class="st">'currency'</span>, palette<span class="op">=</span>[<span class="st">'#1ABC9C'</span>, <span class="st">'#E67E22'</span>, <span class="st">'#8E44AD'</span>], inner<span class="op">=</span><span class="st">'quartile'</span>, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Currency'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution of Opening Price by Currency'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics by currency</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Opening Price Statistics by Currency ---"</span>)</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>currency_stats <span class="op">=</span> ebay_df.groupby(<span class="st">'currency'</span>)[<span class="st">'OpenPrice'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>, <span class="st">'std'</span>, <span class="st">'count'</span>])</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>currency_stats <span class="op">=</span> currency_stats.<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(currency_stats)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-15-output-1.png" width="951" height="566" class="figure-img"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Opening Price Statistics by Currency ---
           mean  median    std  count
currency                             
EUR        5.60    2.45  10.80    533
GBP        5.54    1.77  14.86    147
US        16.79    6.22  46.78   1292</code></pre>
</div>
</div>
</section>
<section id="combined-violin-plot-opening-price-by-category-and-competitive-status" class="level3">
<h3 class="anchored" data-anchor-id="combined-violin-plot-opening-price-by-category-and-competitive-status">Combined Violin Plot: Opening Price by Category and Competitive Status</h3>
<div id="12b0c531" class="cell" data-execution_count="15">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a combined violin plot showing Category, Opening Price, and Competitive status</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>ebay_df[<span class="st">'Competitive_Label'</span>] <span class="op">=</span> ebay_df[<span class="st">'Competitive'</span>].<span class="bu">map</span>({<span class="dv">0</span>: <span class="st">'Non-Competitive'</span>, <span class="dv">1</span>: <span class="st">'Competitive'</span>})</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">7</span>))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>sns.violinplot(x<span class="op">=</span><span class="st">'Category'</span>, y<span class="op">=</span><span class="st">'OpenPrice'</span>, hue<span class="op">=</span><span class="st">'Competitive_Label'</span>, data<span class="op">=</span>ebay_df, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>               palette<span class="op">=</span>{<span class="st">'Non-Competitive'</span>: <span class="st">'#E74C3C'</span>, <span class="st">'Competitive'</span>: <span class="st">'#27AE60'</span>}, </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>               split<span class="op">=</span><span class="va">True</span>, inner<span class="op">=</span><span class="st">'quartile'</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Category'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Opening Price ($)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Opening Price Distribution by Category and Competitive Status'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Auction Type'</span>, loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-16-output-1.png" width="1525" height="662" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="key-observations-from-opening-price-distribution" class="level3">
<h3 class="anchored" data-anchor-id="key-observations-from-opening-price-distribution">Key Observations from Opening Price Distribution</h3>
<div id="5cb803cb" class="cell" data-execution_count="16">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and display key observations</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"KEY OBSERVATIONS: OPENING PRICE DISTRIBUTION"</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">60</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Overall statistics</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📊 Overall Opening Price Statistics:"</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Mean:   $</span><span class="sc">{</span>ebay_df[<span class="st">'OpenPrice'</span>]<span class="sc">.</span>mean()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Median: $</span><span class="sc">{</span>ebay_df[<span class="st">'OpenPrice'</span>]<span class="sc">.</span>median()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Std:    $</span><span class="sc">{</span>ebay_df[<span class="st">'OpenPrice'</span>]<span class="sc">.</span>std()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Range:  $</span><span class="sc">{</span>ebay_df[<span class="st">'OpenPrice'</span>]<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.2f}</span><span class="ss"> - $</span><span class="sc">{</span>ebay_df[<span class="st">'OpenPrice'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Category with highest median opening price</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>highest_median_cat <span class="op">=</span> category_stats[<span class="st">'median'</span>].idxmax()</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">📈 Category with HIGHEST median opening price: </span><span class="sc">{</span>highest_median_cat<span class="sc">}</span><span class="ss"> ($</span><span class="sc">{</span>category_stats<span class="sc">.</span>loc[highest_median_cat, <span class="st">'median'</span>]<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Competitive vs Non-Competitive comparison</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>comp_stats <span class="op">=</span> ebay_df.groupby(<span class="st">'Competitive'</span>)[<span class="st">'OpenPrice'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>])</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">🏆 Opening Price by Auction Outcome:"</span>)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Non-Competitive (0): Mean=$</span><span class="sc">{</span>comp_stats<span class="sc">.</span>loc[<span class="dv">0</span>, <span class="st">'mean'</span>]<span class="sc">:.2f}</span><span class="ss">, Median=$</span><span class="sc">{</span>comp_stats<span class="sc">.</span>loc[<span class="dv">0</span>, <span class="st">'median'</span>]<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Competitive (1):     Mean=$</span><span class="sc">{</span>comp_stats<span class="sc">.</span>loc[<span class="dv">1</span>, <span class="st">'mean'</span>]<span class="sc">:.2f}</span><span class="ss">, Median=$</span><span class="sc">{</span>comp_stats<span class="sc">.</span>loc[<span class="dv">1</span>, <span class="st">'median'</span>]<span class="sc">:.2f}</span><span class="ss">"</span>)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> comp_stats.loc[<span class="dv">0</span>, <span class="st">'median'</span>] <span class="op">&gt;</span> comp_stats.loc[<span class="dv">1</span>, <span class="st">'median'</span>]:</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">   ⚠️  Non-competitive auctions tend to have HIGHER opening prices"</span>)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"      This suggests higher starting prices may discourage bidding competition"</span>)</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">   ✓ Competitive auctions tend to have higher opening prices"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================================================
KEY OBSERVATIONS: OPENING PRICE DISTRIBUTION
============================================================

📊 Overall Opening Price Statistics:
   Mean:   $12.93
   Median: $4.50
   Std:    $38.86
   Range:  $0.01 - $999.00

📈 Category with HIGHEST median opening price: Automotive ($24.95)

🏆 Opening Price by Auction Outcome:
   Non-Competitive (0): Mean=$17.00, Median=$6.99
   Competitive (1):     Mean=$9.47, Median=$2.45

   ⚠️  Non-competitive auctions tend to have HIGHER opening prices
      This suggests higher starting prices may discourage bidding competition</code></pre>
</div>
</div>
</section>
</section>
<section id="part-e-converting-variables-to-category-type" class="level2">
<h2 class="anchored" data-anchor-id="part-e-converting-variables-to-category-type">Part e: Converting Variables to Category Type</h2>
<div id="edea492a" class="cell" data-execution_count="17">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a copy for modeling</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>ebay_model <span class="op">=</span> ebay_df.copy()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to category type</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>ebay_model[<span class="st">'currency'</span>] <span class="op">=</span> ebay_model[<span class="st">'currency'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>ebay_model[<span class="st">'endDay'</span>] <span class="op">=</span> ebay_model[<span class="st">'endDay'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>ebay_model[<span class="st">'Category'</span>] <span class="op">=</span> ebay_model[<span class="st">'Category'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>ebay_model[<span class="st">'Competitive'</span>] <span class="op">=</span> ebay_model[<span class="st">'Competitive'</span>].astype(<span class="st">'category'</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Variable types after conversion:"</span>)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ebay_model.dtypes)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Variable types after conversion:
Category             category
currency             category
sellerRating            int64
Duration                int64
endDay               category
ClosePrice            float64
OpenPrice             float64
Competitive          category
Competitive_Label      object
dtype: object</code></pre>
</div>
</div>
</section>
<section id="part-f-creating-dummy-variables" class="level2">
<h2 class="anchored" data-anchor-id="part-f-creating-dummy-variables">Part f: Creating Dummy Variables</h2>
<div id="d70d48f1" class="cell" data-execution_count="18">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create dummy variables (dtype=int for statsmodels compatibility)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>ebay_model <span class="op">=</span> pd.get_dummies(ebay_model, prefix_sep<span class="op">=</span><span class="st">'_'</span>, drop_first<span class="op">=</span><span class="va">False</span>, dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Shape after creating dummies: </span><span class="sc">{</span>ebay_model<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Columns after creating dummies:"</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ebay_model.columns.tolist())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Shape after creating dummies: (1972, 36)

Columns after creating dummies:
['sellerRating', 'Duration', 'ClosePrice', 'OpenPrice', 'Category_Antique/Art/Craft', 'Category_Automotive', 'Category_Books', 'Category_Business/Industrial', 'Category_Clothing/Accessories', 'Category_Coins/Stamps', 'Category_Collectibles', 'Category_Computer', 'Category_Electronics', 'Category_EverythingElse', 'Category_Health/Beauty', 'Category_Home/Garden', 'Category_Jewelry', 'Category_Music/Movie/Game', 'Category_Photography', 'Category_Pottery/Glass', 'Category_SportingGoods', 'Category_Toys/Hobbies', 'currency_EUR', 'currency_GBP', 'currency_US', 'endDay_Fri', 'endDay_Mon', 'endDay_Sat', 'endDay_Sun', 'endDay_Thu', 'endDay_Tue', 'endDay_Wed', 'Competitive_0', 'Competitive_1', 'Competitive_Label_Competitive', 'Competitive_Label_Non-Competitive']</code></pre>
</div>
</div>
<div id="2b0d26ff" class="cell" data-execution_count="19">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop reference categories (first category for each variable)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Category_Automotive, currency_EUR, endDay_Mon</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>columns_to_drop <span class="op">=</span> [<span class="st">'Category_Automotive'</span>, <span class="st">'currency_EUR'</span>, <span class="st">'endDay_Mon'</span>, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                   <span class="st">'Competitive_0'</span>]  <span class="co"># Also drop one of the Competitive dummies</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which columns exist before dropping</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>existing_cols <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> columns_to_drop <span class="cf">if</span> col <span class="kw">in</span> ebay_model.columns]</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>ebay_model.drop(columns<span class="op">=</span>existing_cols, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename Competitive_1 to Competitive</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'Competitive_1'</span> <span class="kw">in</span> ebay_model.columns:</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    ebay_model.rename(columns<span class="op">=</span>{<span class="st">'Competitive_1'</span>: <span class="st">'Competitive'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Shape after dropping reference categories: </span><span class="sc">{</span>ebay_model<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Final columns for modeling:"</span>)</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ebay_model.columns.tolist())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Shape after dropping reference categories: (1972, 32)

Final columns for modeling:
['sellerRating', 'Duration', 'ClosePrice', 'OpenPrice', 'Category_Antique/Art/Craft', 'Category_Books', 'Category_Business/Industrial', 'Category_Clothing/Accessories', 'Category_Coins/Stamps', 'Category_Collectibles', 'Category_Computer', 'Category_Electronics', 'Category_EverythingElse', 'Category_Health/Beauty', 'Category_Home/Garden', 'Category_Jewelry', 'Category_Music/Movie/Game', 'Category_Photography', 'Category_Pottery/Glass', 'Category_SportingGoods', 'Category_Toys/Hobbies', 'currency_GBP', 'currency_US', 'endDay_Fri', 'endDay_Sat', 'endDay_Sun', 'endDay_Thu', 'endDay_Tue', 'endDay_Wed', 'Competitive', 'Competitive_Label_Competitive', 'Competitive_Label_Non-Competitive']</code></pre>
</div>
</div>
</section>
<section id="part-g-outlier-analysis" class="level2">
<h2 class="anchored" data-anchor-id="part-g-outlier-analysis">Part g: Outlier Analysis</h2>
<div id="6dd53c63" class="cell" data-execution_count="20">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify outliers using IQR method for numerical columns (but keep them in the dataset)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>numerical_cols <span class="op">=</span> [<span class="st">'OpenPrice'</span>, <span class="st">'ClosePrice'</span>, <span class="st">'sellerRating'</span>]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Dataset size: </span><span class="sc">{</span><span class="bu">len</span>(ebay_model)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Outlier detection using IQR method:"</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> numerical_cols:</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    Q1 <span class="op">=</span> ebay_model[col].quantile(<span class="fl">0.25</span>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    Q3 <span class="op">=</span> ebay_model[col].quantile(<span class="fl">0.75</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    lower_bound <span class="op">=</span> Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    upper_bound <span class="op">=</span> Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    outliers_in_col <span class="op">=</span> ((ebay_model[col] <span class="op">&lt;</span> lower_bound) <span class="op">|</span> (ebay_model[col] <span class="op">&gt;</span> upper_bound)).<span class="bu">sum</span>()</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>outliers_in_col<span class="sc">}</span><span class="ss"> outliers detected (range: </span><span class="sc">{</span>lower_bound<span class="sc">:.2f}</span><span class="ss"> to </span><span class="sc">{</span>upper_bound<span class="sc">:.2f}</span><span class="ss">)"</span>)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">✓ Outliers are KEPT in the dataset for modeling."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dataset size: 1972

Outlier detection using IQR method:
  OpenPrice: 206 outliers detected (range: -11.91 to 23.13)
  ClosePrice: 250 outliers detected (range: -29.73 to 62.64)
  sellerRating: 181 outliers detected (range: -3582.50 to 7557.50)

✓ Outliers are KEPT in the dataset for modeling.</code></pre>
</div>
</div>
</section>
<section id="part-h-data-partitioning-60-train-40-test" class="level2">
<h2 class="anchored" data-anchor-id="part-h-data-partitioning-60-train-40-test">Part h: Data Partitioning (60% Train / 40% Test)</h2>
<div id="4d2b7a26" class="cell" data-execution_count="21">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define X (features) and y (target)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert y to int to ensure compatibility with statsmodels</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> ebay_model[<span class="st">'Competitive'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> ebay_model.drop(columns<span class="op">=</span>[<span class="st">'Competitive'</span>])</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data with random_state=202</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    X, y, test_size<span class="op">=</span><span class="fl">0.40</span>, random_state<span class="op">=</span><span class="dv">202</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Training set size: </span><span class="sc">{</span><span class="bu">len</span>(X_train)<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="bu">len</span>(X_train)<span class="op">/</span><span class="bu">len</span>(X)<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Test set size: </span><span class="sc">{</span><span class="bu">len</span>(X_test)<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="bu">len</span>(X_test)<span class="op">/</span><span class="bu">len</span>(X)<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Training set size: 1183 (60.0%)
Test set size: 789 (40.0%)</code></pre>
</div>
</div>
</section>
<section id="modeling-part-1-logistic-regression-with-all-variables" class="level2">
<h2 class="anchored" data-anchor-id="modeling-part-1-logistic-regression-with-all-variables">Modeling Part 1: Logistic Regression with ALL Variables</h2>
<div id="67b71d38" class="cell" data-execution_count="22">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using statsmodels for detailed output</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>X_train_const <span class="op">=</span> sm.add_constant(X_train)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>X_test_const <span class="op">=</span> sm.add_constant(X_test)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit logistic regression using 'bfgs' method to avoid singular matrix issues</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>logit_model <span class="op">=</span> sm.Logit(y_train, X_train_const)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> logit_model.fit(method<span class="op">=</span><span class="st">'bfgs'</span>, disp<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Logistic Regression Summary (with all variables including ClosePrice) ---"</span>)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Logistic Regression Summary (with all variables including ClosePrice) ---
                           Logit Regression Results                           
==============================================================================
Dep. Variable:            Competitive   No. Observations:                 1183
Model:                          Logit   Df Residuals:                     1152
Method:                           MLE   Df Model:                           30
Date:                Mon, 12 Jan 2026   Pseudo R-squ.:               -0.004879
Time:                        15:13:29   Log-Likelihood:                -819.99
converged:                      False   LL-Null:                       -816.01
Covariance Type:            nonrobust   LLR p-value:                     1.000
=====================================================================================================
                                        coef    std err          z      P&gt;|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------
const                                      0        nan        nan        nan         nan         nan
sellerRating                               0        nan        nan        nan         nan         nan
Duration                                   0        nan        nan        nan         nan         nan
ClosePrice                                 0        nan        nan        nan         nan         nan
OpenPrice                                  0        nan        nan        nan         nan         nan
Category_Antique/Art/Craft                 0        nan        nan        nan         nan         nan
Category_Books                             0        nan        nan        nan         nan         nan
Category_Business/Industrial               0        nan        nan        nan         nan         nan
Category_Clothing/Accessories              0        nan        nan        nan         nan         nan
Category_Coins/Stamps                      0        nan        nan        nan         nan         nan
Category_Collectibles                      0        nan        nan        nan         nan         nan
Category_Computer                          0        nan        nan        nan         nan         nan
Category_Electronics                       0        nan        nan        nan         nan         nan
Category_EverythingElse                    0        nan        nan        nan         nan         nan
Category_Health/Beauty                     0        nan        nan        nan         nan         nan
Category_Home/Garden                       0        nan        nan        nan         nan         nan
Category_Jewelry                           0        nan        nan        nan         nan         nan
Category_Music/Movie/Game                  0        nan        nan        nan         nan         nan
Category_Photography                       0        nan        nan        nan         nan         nan
Category_Pottery/Glass                     0        nan        nan        nan         nan         nan
Category_SportingGoods                     0        nan        nan        nan         nan         nan
Category_Toys/Hobbies                      0        nan        nan        nan         nan         nan
currency_GBP                               0        nan        nan        nan         nan         nan
currency_US                                0        nan        nan        nan         nan         nan
endDay_Fri                                 0        nan        nan        nan         nan         nan
endDay_Sat                                 0        nan        nan        nan         nan         nan
endDay_Sun                                 0        nan        nan        nan         nan         nan
endDay_Thu                                 0        nan        nan        nan         nan         nan
endDay_Tue                                 0        nan        nan        nan         nan         nan
endDay_Wed                                 0        nan        nan        nan         nan         nan
Competitive_Label_Competitive              0        nan        nan        nan         nan         nan
Competitive_Label_Non-Competitive          0        nan        nan        nan         nan         nan
=====================================================================================================</code></pre>
</div>
</div>
<div id="94ba1bf3" class="cell" data-execution_count="23">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using sklearn for predictions</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>lr_model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>, random_state<span class="op">=</span><span class="dv">202</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>lr_model.fit(X_train, y_train)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: #000;
  --sklearn-color-text-muted: #666;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: flex;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
  align-items: start;
  justify-content: space-between;
  gap: 0.5em;
}

#sk-container-id-1 label.sk-toggleable__label .caption {
  font-size: 0.6rem;
  font-weight: lighter;
  color: var(--sklearn-color-text-muted);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  display: none;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  display: block;
  width: 100%;
  overflow: visible;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 0.5em;
  text-align: center;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}

.estimator-table summary {
    padding: .5rem;
    font-family: monospace;
    cursor: pointer;
}

.estimator-table details[open] {
    padding-left: 0.1rem;
    padding-right: 0.1rem;
    padding-bottom: 0.3rem;
}

.estimator-table .parameters-table {
    margin-left: auto !important;
    margin-right: auto !important;
}

.estimator-table .parameters-table tr:nth-child(odd) {
    background-color: #fff;
}

.estimator-table .parameters-table tr:nth-child(even) {
    background-color: #f6f6f6;
}

.estimator-table .parameters-table tr:hover {
    background-color: #e0e0e0;
}

.estimator-table table td {
    border: 1px solid rgba(106, 105, 104, 0.232);
}

.user-set td {
    color:rgb(255, 94, 0);
    text-align: left;
}

.user-set td.value pre {
    color:rgb(255, 94, 0) !important;
    background-color: transparent !important;
}

.default td {
    color: black;
    text-align: left;
}

.user-set td i,
.default td i {
    color: black;
}

.copy-paste-icon {
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NDggNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNy4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjUgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTIwOCAwTDMzMi4xIDBjMTIuNyAwIDI0LjkgNS4xIDMzLjkgMTQuMWw2Ny45IDY3LjljOSA5IDE0LjEgMjEuMiAxNC4xIDMzLjlMNDQ4IDMzNmMwIDI2LjUtMjEuNSA0OC00OCA0OGwtMTkyIDBjLTI2LjUgMC00OC0yMS41LTQ4LTQ4bDAtMjg4YzAtMjYuNSAyMS41LTQ4IDQ4LTQ4ek00OCAxMjhsODAgMCAwIDY0LTY0IDAgMCAyNTYgMTkyIDAgMC0zMiA2NCAwIDAgNDhjMCAyNi41LTIxLjUgNDgtNDggNDhMNDggNTEyYy0yNi41IDAtNDgtMjEuNS00OC00OEwwIDE3NmMwLTI2LjUgMjEuNS00OCA0OC00OHoiLz48L3N2Zz4=);
    background-repeat: no-repeat;
    background-size: 14px 14px;
    background-position: 0;
    display: inline-block;
    width: 14px;
    height: 14px;
    cursor: pointer;
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>LogisticRegression(max_iter=1000, random_state=202)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br>On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden=""><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked=""><label for="sk-estimator-id-1" class="sk-toggleable__label fitted sk-toggleable__label-arrow"><div><div>LogisticRegression</div></div><div><a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.7/modules/generated/sklearn.linear_model.LogisticRegression.html">?<span>Documentation for LogisticRegression</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></div></label><div class="sk-toggleable__content fitted" data-param-prefix="">
        <div class="estimator-table">
            <details>
                <summary>Parameters</summary>
                
<table class="parameters-table caption-top table table-sm table-striped small">
<tbody>
<tr class="default odd">
<td><em></em></td>
<td class="param">penalty&nbsp;</td>
<td class="value">'l2'</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">dual&nbsp;</td>
<td class="value">False</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">tol&nbsp;</td>
<td class="value">0.0001</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">C&nbsp;</td>
<td class="value">1.0</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">fit_intercept&nbsp;</td>
<td class="value">True</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">intercept_scaling&nbsp;</td>
<td class="value">1</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">class_weight&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="user-set even">
<td><em></em></td>
<td class="param">random_state&nbsp;</td>
<td class="value">202</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">solver&nbsp;</td>
<td class="value">'lbfgs'</td>
</tr>
<tr class="user-set even">
<td><em></em></td>
<td class="param">max_iter&nbsp;</td>
<td class="value">1000</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">multi_class&nbsp;</td>
<td class="value">'deprecated'</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">verbose&nbsp;</td>
<td class="value">0</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">warm_start&nbsp;</td>
<td class="value">False</td>
</tr>
<tr class="default even">
<td><em></em></td>
<td class="param">n_jobs&nbsp;</td>
<td class="value">None</td>
</tr>
<tr class="default odd">
<td><em></em></td>
<td class="param">l1_ratio&nbsp;</td>
<td class="value">None</td>
</tr>
</tbody>
</table>

            </details>
        </div>
    </div></div></div></div></div><script>function copyToClipboard(text, element) {
    // Get the parameter prefix from the closest toggleable content
    const toggleableContent = element.closest('.sk-toggleable__content');
    const paramPrefix = toggleableContent ? toggleableContent.dataset.paramPrefix : '';
    const fullParamName = paramPrefix ? `${paramPrefix}${text}` : text;

    const originalStyle = element.style;
    const computedStyle = window.getComputedStyle(element);
    const originalWidth = computedStyle.width;
    const originalHTML = element.innerHTML.replace('Copied!', '');

    navigator.clipboard.writeText(fullParamName)
        .then(() => {
            element.style.width = originalWidth;
            element.style.color = 'green';
            element.innerHTML = "Copied!";

            setTimeout(() => {
                element.innerHTML = originalHTML;
                element.style = originalStyle;
            }, 2000);
        })
        .catch(err => {
            console.error('Failed to copy:', err);
            element.style.color = 'red';
            element.innerHTML = "Failed!";
            setTimeout(() => {
                element.innerHTML = originalHTML;
                element.style = originalStyle;
            }, 2000);
        });
    return false;
}

document.querySelectorAll('.fa-regular.fa-copy').forEach(function(element) {
    const toggleableContent = element.closest('.sk-toggleable__content');
    const paramPrefix = toggleableContent ? toggleableContent.dataset.paramPrefix : '';
    const paramName = element.parentElement.nextElementSibling.textContent.trim();
    const fullParamName = paramPrefix ? `${paramPrefix}${paramName}` : paramName;

    element.setAttribute('title', fullParamName);
});
</script>
</div>
</div>
</section>
<section id="modeling-part-2-confusion-matrix-and-accuracy" class="level2">
<h2 class="anchored" data-anchor-id="modeling-part-2-confusion-matrix-and-accuracy">Modeling Part 2: Confusion Matrix and Accuracy</h2>
<div id="adfb7ea4" class="cell" data-execution_count="24">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions on test set</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> lr_model.predict(X_test)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusion Matrix</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(y_test, y_pred)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Confusion Matrix (Validation Data) ---"</span>)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                 Predicted"</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                 0       1"</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Actual 0      </span><span class="sc">{</span>cm[<span class="dv">0</span>,<span class="dv">0</span>]<span class="sc">:4d}</span><span class="ss">    </span><span class="sc">{</span>cm[<span class="dv">0</span>,<span class="dv">1</span>]<span class="sc">:4d}</span><span class="ss">"</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"       1      </span><span class="sc">{</span>cm[<span class="dv">1</span>,<span class="dv">0</span>]<span class="sc">:4d}</span><span class="ss">    </span><span class="sc">{</span>cm[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">:4d}</span><span class="ss">"</span>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>accuracy<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Confusion Matrix (Validation Data) ---
                 Predicted
                 0       1
Actual 0       363       0
       1         0     426

Accuracy: 1.0000 (100.00%)</code></pre>
</div>
</div>
<div id="dd3fdce6" class="cell" data-execution_count="25">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusion Matrix Plot</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>sns.heatmap(cm, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'d'</span>, cmap<span class="op">=</span><span class="st">'Blues'</span>, </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>            xticklabels<span class="op">=</span>[<span class="st">'Non-Competitive (0)'</span>, <span class="st">'Competitive (1)'</span>],</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>            yticklabels<span class="op">=</span>[<span class="st">'Non-Competitive (0)'</span>, <span class="st">'Competitive (1)'</span>],</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>            annot_kws<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">14</span>})</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Predicted'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Actual'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Confusion Matrix (With ClosePrice)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-26-output-1.png" width="713" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="72aaaa16" class="cell" data-execution_count="26">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Classification Report</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Classification Report ---"</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Classification Report ---
              precision    recall  f1-score   support

           0       1.00      1.00      1.00       363
           1       1.00      1.00      1.00       426

    accuracy                           1.00       789
   macro avg       1.00      1.00      1.00       789
weighted avg       1.00      1.00      1.00       789
</code></pre>
</div>
</div>
</section>
<section id="modeling-part-3-challenge-of-using-closeprice" class="level2">
<h2 class="anchored" data-anchor-id="modeling-part-3-challenge-of-using-closeprice">Modeling Part 3: Challenge of Using ClosePrice</h2>
<p><strong>ANSWER:</strong> The challenge of using ClosePrice to predict if an auction will be competitive is that ClosePrice is <strong>NOT AVAILABLE</strong> at the time of prediction.</p>
<section id="key-issues" class="level3">
<h3 class="anchored" data-anchor-id="key-issues">Key Issues:</h3>
<ol type="1">
<li><p><strong>DATA LEAKAGE:</strong> ClosePrice is determined AFTER the auction ends, which means it is influenced by whether the auction was competitive or not. Using it as a predictor creates data leakage - we’re using information that wouldn’t be available when making predictions on new auctions.</p></li>
<li><p><strong>CAUSALITY:</strong> Higher close prices often result FROM competitive bidding. This reverses the causal relationship - the outcome (competitive auction) causes the predictor (higher close price), not the other way around.</p></li>
<li><p><strong>PRACTICAL UTILITY:</strong> In a real-world scenario, we want to predict whether an auction WILL BE competitive before it happens. ClosePrice is only known after the auction concludes, making it useless for prospective predictions.</p></li>
</ol>
<p>This is why we need to build a model WITHOUT ClosePrice for practical use.</p>
</section>
</section>
<section id="modeling-part-4-model-without-closeprice" class="level2">
<h2 class="anchored" data-anchor-id="modeling-part-4-model-without-closeprice">Modeling Part 4: Model WITHOUT ClosePrice</h2>
<div id="2e3f1aa3" class="cell" data-execution_count="27">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove ClosePrice from features</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>X_no_close <span class="op">=</span> X.drop(columns<span class="op">=</span>[<span class="st">'ClosePrice'</span>])</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Split again with same random state</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>X_train_nc, X_test_nc, y_train_nc, y_test_nc <span class="op">=</span> train_test_split(</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    X_no_close, y, test_size<span class="op">=</span><span class="fl">0.40</span>, random_state<span class="op">=</span><span class="dv">202</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit new model without ClosePrice</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>lr_model_nc <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>, random_state<span class="op">=</span><span class="dv">202</span>)</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>lr_model_nc.fit(X_train_nc, y_train_nc)</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Predictions</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>y_pred_nc <span class="op">=</span> lr_model_nc.predict(X_test_nc)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="2c47dc46" class="cell" data-execution_count="28">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusion Matrix</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>cm_nc <span class="op">=</span> confusion_matrix(y_test_nc, y_pred_nc)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Confusion Matrix WITHOUT ClosePrice ---"</span>)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                 Predicted"</span>)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"                 0       1"</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Actual 0      </span><span class="sc">{</span>cm_nc[<span class="dv">0</span>,<span class="dv">0</span>]<span class="sc">:4d}</span><span class="ss">    </span><span class="sc">{</span>cm_nc[<span class="dv">0</span>,<span class="dv">1</span>]<span class="sc">:4d}</span><span class="ss">"</span>)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"       1      </span><span class="sc">{</span>cm_nc[<span class="dv">1</span>,<span class="dv">0</span>]<span class="sc">:4d}</span><span class="ss">    </span><span class="sc">{</span>cm_nc[<span class="dv">1</span>,<span class="dv">1</span>]<span class="sc">:4d}</span><span class="ss">"</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># New Accuracy</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>accuracy_nc <span class="op">=</span> accuracy_score(y_test_nc, y_pred_nc)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Accuracy WITHOUT ClosePrice: </span><span class="sc">{</span>accuracy_nc<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>accuracy_nc<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Confusion Matrix WITHOUT ClosePrice ---
                 Predicted
                 0       1
Actual 0       363       0
       1         0     426

Accuracy WITHOUT ClosePrice: 1.0000 (100.00%)</code></pre>
</div>
</div>
<div id="eea2bf09" class="cell" data-execution_count="29">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Confusion Matrix Plot (Without ClosePrice)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>sns.heatmap(cm_nc, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'d'</span>, cmap<span class="op">=</span><span class="st">'Oranges'</span>, </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>            xticklabels<span class="op">=</span>[<span class="st">'Non-Competitive (0)'</span>, <span class="st">'Competitive (1)'</span>],</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>            yticklabels<span class="op">=</span>[<span class="st">'Non-Competitive (0)'</span>, <span class="st">'Competitive (1)'</span>],</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>            annot_kws<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">14</span>})</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Predicted'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Actual'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Confusion Matrix (Without ClosePrice)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="eBay_analysis_files/figure-html/cell-30-output-1.png" width="713" height="566" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="a48db71a" class="cell" data-execution_count="30">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change in accuracy</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>accuracy_change <span class="op">=</span> accuracy_nc <span class="op">-</span> accuracy</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"--- Comparison ---"</span>)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy WITH ClosePrice:    </span><span class="sc">{</span>accuracy<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>accuracy<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy WITHOUT ClosePrice: </span><span class="sc">{</span>accuracy_nc<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>accuracy_nc<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Change in Accuracy:          </span><span class="sc">{</span>accuracy_change<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> accuracy_change <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">⚠️  Accuracy DECREASED by </span><span class="sc">{</span><span class="bu">abs</span>(accuracy_change)<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">% after removing ClosePrice."</span>)</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   This confirms that ClosePrice was contributing significantly to the model,"</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   but for practical predictions, the model without ClosePrice is more appropriate."</span>)</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">✓ Accuracy changed by </span><span class="sc">{</span>accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">% after removing ClosePrice."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Comparison ---
Accuracy WITH ClosePrice:    1.0000 (100.00%)
Accuracy WITHOUT ClosePrice: 1.0000 (100.00%)
Change in Accuracy:          0.0000 (0.00%)

✓ Accuracy changed by 0.00% after removing ClosePrice.</code></pre>
</div>
</div>
<div id="cf876f72" class="cell" data-execution_count="31">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Classification Report for model without ClosePrice</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Classification Report (Without ClosePrice) ---"</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test_nc, y_pred_nc))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Classification Report (Without ClosePrice) ---
              precision    recall  f1-score   support

           0       1.00      1.00      1.00       363
           1       1.00      1.00      1.00       426

    accuracy                           1.00       789
   macro avg       1.00      1.00      1.00       789
weighted avg       1.00      1.00      1.00       789
</code></pre>
</div>
</div>
<div id="469a55aa" class="cell" data-execution_count="32">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Statsmodels summary for the model without ClosePrice</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--- Logistic Regression Summary (Without ClosePrice) ---"</span>)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>X_train_nc_const <span class="op">=</span> sm.add_constant(X_train_nc)</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>logit_model_nc <span class="op">=</span> sm.Logit(y_train_nc, X_train_nc_const)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>result_nc <span class="op">=</span> logit_model_nc.fit(method<span class="op">=</span><span class="st">'bfgs'</span>, disp<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result_nc.summary())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>--- Logistic Regression Summary (Without ClosePrice) ---
                           Logit Regression Results                           
==============================================================================
Dep. Variable:            Competitive   No. Observations:                 1183
Model:                          Logit   Df Residuals:                     1153
Method:                           MLE   Df Model:                           29
Date:                Mon, 12 Jan 2026   Pseudo R-squ.:               -0.004879
Time:                        15:13:30   Log-Likelihood:                -819.99
converged:                      False   LL-Null:                       -816.01
Covariance Type:            nonrobust   LLR p-value:                     1.000
=====================================================================================================
                                        coef    std err          z      P&gt;|z|      [0.025      0.975]
-----------------------------------------------------------------------------------------------------
const                                      0        nan        nan        nan         nan         nan
sellerRating                               0        nan        nan        nan         nan         nan
Duration                                   0        nan        nan        nan         nan         nan
OpenPrice                                  0        nan        nan        nan         nan         nan
Category_Antique/Art/Craft                 0        nan        nan        nan         nan         nan
Category_Books                             0        nan        nan        nan         nan         nan
Category_Business/Industrial               0        nan        nan        nan         nan         nan
Category_Clothing/Accessories              0        nan        nan        nan         nan         nan
Category_Coins/Stamps                      0        nan        nan        nan         nan         nan
Category_Collectibles                      0        nan        nan        nan         nan         nan
Category_Computer                          0        nan        nan        nan         nan         nan
Category_Electronics                       0        nan        nan        nan         nan         nan
Category_EverythingElse                    0        nan        nan        nan         nan         nan
Category_Health/Beauty                     0        nan        nan        nan         nan         nan
Category_Home/Garden                       0        nan        nan        nan         nan         nan
Category_Jewelry                           0        nan        nan        nan         nan         nan
Category_Music/Movie/Game                  0        nan        nan        nan         nan         nan
Category_Photography                       0        nan        nan        nan         nan         nan
Category_Pottery/Glass                     0        nan        nan        nan         nan         nan
Category_SportingGoods                     0        nan        nan        nan         nan         nan
Category_Toys/Hobbies                      0        nan        nan        nan         nan         nan
currency_GBP                               0        nan        nan        nan         nan         nan
currency_US                                0        nan        nan        nan         nan         nan
endDay_Fri                                 0        nan        nan        nan         nan         nan
endDay_Sat                                 0        nan        nan        nan         nan         nan
endDay_Sun                                 0        nan        nan        nan         nan         nan
endDay_Thu                                 0        nan        nan        nan         nan         nan
endDay_Tue                                 0        nan        nan        nan         nan         nan
endDay_Wed                                 0        nan        nan        nan         nan         nan
Competitive_Label_Competitive              0        nan        nan        nan         nan         nan
Competitive_Label_Non-Competitive          0        nan        nan        nan         nan         nan
=====================================================================================================</code></pre>
</div>
</div>
</section>
<section id="summary-of-key-findings" class="level2">
<h2 class="anchored" data-anchor-id="summary-of-key-findings">Summary of Key Findings</h2>
<p>This section summarizes the key findings from our analysis by answering the critical questions about eBay auction competitiveness.</p>
<div id="6b9cead2" class="cell" data-execution_count="33">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate training accuracies (not just validation)</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Model WITH ClosePrice - Training Accuracy</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>y_train_pred <span class="op">=</span> lr_model.predict(X_train)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>train_accuracy_with_close <span class="op">=</span> accuracy_score(y_train, y_train_pred)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Model WITHOUT ClosePrice - Training Accuracy  </span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>y_train_pred_nc <span class="op">=</span> lr_model_nc.predict(X_train_nc)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>train_accuracy_without_close <span class="op">=</span> accuracy_score(y_train_nc, y_train_pred_nc)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Store validation accuracies (already calculated)</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>val_accuracy_with_close <span class="op">=</span> accuracy</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>val_accuracy_without_close <span class="op">=</span> accuracy_nc</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"SUMMARY OF KEY FINDINGS"</span>)</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>======================================================================
SUMMARY OF KEY FINDINGS
======================================================================</code></pre>
</div>
</div>
<section id="q1-which-category-has-the-most-competitive-auctions-which-day-of-week" class="level3">
<h3 class="anchored" data-anchor-id="q1-which-category-has-the-most-competitive-auctions-which-day-of-week">Q1: Which category has the most competitive auctions? Which day of week?</h3>
<div id="1206c1d0" class="cell" data-execution_count="34">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Category with most competitive auctions</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📊 CATEGORY ANALYSIS:"</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Category with MOST competitive auctions: </span><span class="sc">{</span>category_competitive[<span class="st">'mean'</span>]<span class="sc">.</span>idxmax()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Competitive Rate: </span><span class="sc">{</span>category_competitive[<span class="st">'mean'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2%}</span><span class="ss">"</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Day of week with most competitive auctions</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📅 DAY OF WEEK ANALYSIS:"</span>)</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Day with MOST competitive auctions: </span><span class="sc">{</span>endday_competitive[<span class="st">'mean'</span>]<span class="sc">.</span>idxmax()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Competitive Rate: </span><span class="sc">{</span>endday_competitive[<span class="st">'mean'</span>]<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2%}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>📊 CATEGORY ANALYSIS:
   Category with MOST competitive auctions: Photography
   Competitive Rate: 84.62%

📅 DAY OF WEEK ANALYSIS:
   Day with MOST competitive auctions: Mon
   Competitive Rate: 67.34%</code></pre>
</div>
</div>
</section>
<section id="q2-what-percentage-of-auctions-are-competitive" class="level3">
<h3 class="anchored" data-anchor-id="q2-what-percentage-of-auctions-are-competitive">Q2: What percentage of auctions are competitive?</h3>
<div id="ec3f72d0" class="cell" data-execution_count="35">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>total_auctions <span class="op">=</span> <span class="bu">len</span>(ebay_df)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>competitive_auctions <span class="op">=</span> ebay_df[<span class="st">'Competitive'</span>].<span class="bu">sum</span>()</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>competitive_percentage <span class="op">=</span> (competitive_auctions <span class="op">/</span> total_auctions) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📈 COMPETITIVE AUCTION PERCENTAGE:"</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Total Auctions: </span><span class="sc">{</span>total_auctions<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Competitive Auctions: </span><span class="sc">{</span>competitive_auctions<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Percentage Competitive: </span><span class="sc">{</span>competitive_percentage<span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>📈 COMPETITIVE AUCTION PERCENTAGE:
   Total Auctions: 1972
   Competitive Auctions: 1066
   Percentage Competitive: 54.06%</code></pre>
</div>
</div>
</section>
<section id="q3-is-there-an-imbalance-problem" class="level3">
<h3 class="anchored" data-anchor-id="q3-is-there-an-imbalance-problem">Q3: Is there an imbalance problem?</h3>
<div id="cb1d25e5" class="cell" data-execution_count="36">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"⚖️ CLASS IMBALANCE ANALYSIS:"</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Competitive: </span><span class="sc">{</span>competitive_percentage<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Non-Competitive: </span><span class="sc">{</span><span class="dv">100</span> <span class="op">-</span> competitive_percentage<span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for imbalance (typically if minority class &lt; 40% or &gt; 60%)</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> competitive_percentage <span class="op">&lt;</span> <span class="dv">40</span> <span class="kw">or</span> competitive_percentage <span class="op">&gt;</span> <span class="dv">60</span>:</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   ⚠️  YES - There IS an imbalance problem."</span>)</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   The classes are not evenly balanced (</span><span class="sc">{</span>competitive_percentage<span class="sc">:.1f}</span><span class="ss">% vs </span><span class="sc">{</span><span class="dv">100</span><span class="op">-</span>competitive_percentage<span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   This could affect model performance, particularly for the minority class."</span>)</span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   ✓ NO - The classes are relatively balanced."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>⚖️ CLASS IMBALANCE ANALYSIS:
   Competitive: 54.06%
   Non-Competitive: 45.94%

   ✓ NO - The classes are relatively balanced.</code></pre>
</div>
</div>
</section>
<section id="q4-q7-model-accuracy-comparison" class="level3">
<h3 class="anchored" data-anchor-id="q4-q7-model-accuracy-comparison">Q4-Q7: Model Accuracy Comparison</h3>
<div id="3296ddaf" class="cell" data-execution_count="37">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🎯 MODEL ACCURACY SUMMARY:"</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"WITH ClosePrice:"</span>)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Q4. Training Accuracy:   </span><span class="sc">{</span>train_accuracy_with_close<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>train_accuracy_with_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Q5. Validation Accuracy: </span><span class="sc">{</span>val_accuracy_with_close<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>val_accuracy_with_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"WITHOUT ClosePrice:"</span>)</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Q6. Training Accuracy:   </span><span class="sc">{</span>train_accuracy_without_close<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>train_accuracy_without_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Q7. Validation Accuracy: </span><span class="sc">{</span>val_accuracy_without_close<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>val_accuracy_without_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>🎯 MODEL ACCURACY SUMMARY:
--------------------------------------------------

WITH ClosePrice:
   Q4. Training Accuracy:   1.0000 (100.00%)
   Q5. Validation Accuracy: 1.0000 (100.00%)

WITHOUT ClosePrice:
   Q6. Training Accuracy:   1.0000 (100.00%)
   Q7. Validation Accuracy: 1.0000 (100.00%)</code></pre>
</div>
</div>
</section>
<section id="q8-change-in-accuracy-between-with-and-without-closeprice" class="level3">
<h3 class="anchored" data-anchor-id="q8-change-in-accuracy-between-with-and-without-closeprice">Q8: Change in accuracy between with and without ClosePrice</h3>
<div id="e6145adf" class="cell" data-execution_count="38">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>train_accuracy_change <span class="op">=</span> train_accuracy_without_close <span class="op">-</span> train_accuracy_with_close</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>val_accuracy_change <span class="op">=</span> val_accuracy_without_close <span class="op">-</span> val_accuracy_with_close</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📉 ACCURACY CHANGE (Without ClosePrice - With ClosePrice):"</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-"</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Training Accuracy Change:   </span><span class="sc">{</span>train_accuracy_change<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>train_accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"   Validation Accuracy Change: </span><span class="sc">{</span>val_accuracy_change<span class="sc">:.4f}</span><span class="ss"> (</span><span class="sc">{</span>val_accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%)"</span>)</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>()</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> val_accuracy_change <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   ⚠️  Removing ClosePrice DECREASED validation accuracy by </span><span class="sc">{</span><span class="bu">abs</span>(val_accuracy_change)<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>)</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   However, this is the more appropriate model for real-world predictions"</span>)</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"   since ClosePrice is not available before the auction ends."</span>)</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"   ✓ Removing ClosePrice changed validation accuracy by </span><span class="sc">{</span>val_accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>📉 ACCURACY CHANGE (Without ClosePrice - With ClosePrice):
--------------------------------------------------
   Training Accuracy Change:   0.0000 (0.00%)
   Validation Accuracy Change: 0.0000 (0.00%)

   ✓ Removing ClosePrice changed validation accuracy by 0.00%</code></pre>
</div>
</div>
</section>
<section id="summary-table" class="level3">
<h3 class="anchored" data-anchor-id="summary-table">Summary Table</h3>
<div id="495a1ddb" class="cell" data-execution_count="39">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a summary DataFrame</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>summary_data <span class="op">=</span> {</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Metric'</span>: [</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Most Competitive Category'</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Most Competitive Day'</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Competitive Auction %'</span>,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Imbalance Problem?'</span>,</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Training Accuracy (with ClosePrice)'</span>,</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Validation Accuracy (with ClosePrice)'</span>,</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Training Accuracy (without ClosePrice)'</span>,</span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Validation Accuracy (without ClosePrice)'</span>,</span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Validation Accuracy Change'</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Value'</span>: [</span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>        category_competitive[<span class="st">'mean'</span>].idxmax(),</span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>        endday_competitive[<span class="st">'mean'</span>].idxmax(),</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>competitive_percentage<span class="sc">:.2f}</span><span class="ss">%"</span>,</span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Yes"</span> <span class="cf">if</span> (competitive_percentage <span class="op">&lt;</span> <span class="dv">40</span> <span class="kw">or</span> competitive_percentage <span class="op">&gt;</span> <span class="dv">60</span>) <span class="cf">else</span> <span class="st">"No"</span>,</span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>train_accuracy_with_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>,</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>val_accuracy_with_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>,</span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>train_accuracy_without_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>,</span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>val_accuracy_without_close<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>,</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>val_accuracy_change<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>summary_df <span class="op">=</span> pd.DataFrame(summary_data)</span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"COMPLETE SUMMARY TABLE"</span>)</span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">70</span>)</span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>summary_df</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
======================================================================
COMPLETE SUMMARY TABLE
======================================================================</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Metric</th>
<th data-quarto-table-cell-role="th">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<th data-quarto-table-cell-role="th">0</th>
<td>Most Competitive Category</td>
<td>Photography</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">1</th>
<td>Most Competitive Day</td>
<td>Mon</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">2</th>
<td>Competitive Auction %</td>
<td>54.06%</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">3</th>
<td>Imbalance Problem?</td>
<td>No</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">4</th>
<td>Training Accuracy (with ClosePrice)</td>
<td>100.00%</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">5</th>
<td>Validation Accuracy (with ClosePrice)</td>
<td>100.00%</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">6</th>
<td>Training Accuracy (without ClosePrice)</td>
<td>100.00%</td>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">7</th>
<td>Validation Accuracy (without ClosePrice)</td>
<td>100.00%</td>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">8</th>
<td>Validation Accuracy Change</td>
<td>0.00%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<hr>
</section>
</section>
<section id="summary-answers-to-questions" class="level2">
<h2 class="anchored" data-anchor-id="summary-answers-to-questions">Summary Answers to Questions</h2>
<div id="75b0eef4" class="cell" data-execution_count="40">
<div class="cell-output cell-output-stdout">
<pre><code>===========================================================================
SUMMARY ANSWERS TO ALL QUESTIONS
===========================================================================

PART A &amp; B: DATA LOADING AND OBSERVATION
---------------------------------------------------------------------------
• Dataset contains 1,972 auction records with 9 variables
• Variables include: Category, currency, sellerRating, Duration, endDay...

PART C: CATEGORICAL VARIABLE ANALYSIS
---------------------------------------------------------------------------
• Category with MOST competitive auctions: Photography (84.62%)
• Day with MOST competitive auctions: Mon (67.34%)

PART D: CLASS BALANCE ANALYSIS
---------------------------------------------------------------------------
• Percentage of competitive auctions: 54.06%
• Percentage of non-competitive auctions: 45.94%
• Is there an imbalance problem? NO

PARTS E-H: DATA PREPARATION
---------------------------------------------------------------------------
• Variables converted to category type: currency, endDay, Category, Competitive
• Dummy variables created for categorical predictors
• Reference categories dropped: Category_Automotive, currency_EUR, endDay_Mon
• Training set size: 1183 (60%)
• Test set size: 789 (40%)

MODEL ACCURACY RESULTS
---------------------------------------------------------------------------
Model WITH ClosePrice:
   • Training Accuracy:   1.0000 (100.00%)
   • Validation Accuracy: 1.0000 (100.00%)

Model WITHOUT ClosePrice:
   • Training Accuracy:   1.0000 (100.00%)
   • Validation Accuracy: 1.0000 (100.00%)

CHANGE IN ACCURACY (After Removing ClosePrice)
---------------------------------------------------------------------------
   • Training Accuracy Change:   +0.0000 (+0.00%)
   • Validation Accuracy Change: +0.0000 (+0.00%)

CHALLENGE OF USING CLOSEPRICE
---------------------------------------------------------------------------
   ClosePrice creates DATA LEAKAGE because:
   1. ClosePrice is only known AFTER the auction ends
   2. Competitive bidding CAUSES higher close prices (reversed causality)
   3. Cannot be used for predictions on NEW/upcoming auctions

===========================================================================</code></pre>
</div>
</div>
<div id="74a7c705" class="cell" data-execution_count="41">
<div class="cell-output cell-output-display">
<style type="text/css">
#T_3aab6_row0_col0, #T_3aab6_row0_col1, #T_3aab6_row1_col0, #T_3aab6_row1_col1, #T_3aab6_row2_col0, #T_3aab6_row2_col1, #T_3aab6_row3_col0, #T_3aab6_row3_col1, #T_3aab6_row4_col0, #T_3aab6_row4_col1, #T_3aab6_row5_col0, #T_3aab6_row5_col1, #T_3aab6_row6_col0, #T_3aab6_row6_col1, #T_3aab6_row7_col0, #T_3aab6_row7_col1, #T_3aab6_row8_col0, #T_3aab6_row8_col1 {
  text-align: left;
}
</style>

<table id="T_3aab6" class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th id="T_3aab6_level0_col0" class="col_heading level0 col0" data-quarto-table-cell-role="th">Question</th>
<th id="T_3aab6_level0_col1" class="col_heading level0 col1" data-quarto-table-cell-role="th">Answer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td id="T_3aab6_row0_col0" class="data row0 col0">Most competitive category?</td>
<td id="T_3aab6_row0_col1" class="data row0 col1">Photography</td>
</tr>
<tr class="even">
<td id="T_3aab6_row1_col0" class="data row1 col0">Most competitive day?</td>
<td id="T_3aab6_row1_col1" class="data row1 col1">Mon</td>
</tr>
<tr class="odd">
<td id="T_3aab6_row2_col0" class="data row2 col0">% of auctions competitive?</td>
<td id="T_3aab6_row2_col1" class="data row2 col1">54.06%</td>
</tr>
<tr class="even">
<td id="T_3aab6_row3_col0" class="data row3 col0">Imbalance problem?</td>
<td id="T_3aab6_row3_col1" class="data row3 col1">No</td>
</tr>
<tr class="odd">
<td id="T_3aab6_row4_col0" class="data row4 col0">Training accuracy (with ClosePrice)?</td>
<td id="T_3aab6_row4_col1" class="data row4 col1">100.00%</td>
</tr>
<tr class="even">
<td id="T_3aab6_row5_col0" class="data row5 col0">Validation accuracy (with ClosePrice)?</td>
<td id="T_3aab6_row5_col1" class="data row5 col1">100.00%</td>
</tr>
<tr class="odd">
<td id="T_3aab6_row6_col0" class="data row6 col0">Training accuracy (without ClosePrice)?</td>
<td id="T_3aab6_row6_col1" class="data row6 col1">100.00%</td>
</tr>
<tr class="even">
<td id="T_3aab6_row7_col0" class="data row7 col0">Validation accuracy (without ClosePrice)?</td>
<td id="T_3aab6_row7_col1" class="data row7 col1">100.00%</td>
</tr>
<tr class="odd">
<td id="T_3aab6_row8_col0" class="data row8 col0">Accuracy change after removing ClosePrice?</td>
<td id="T_3aab6_row8_col1" class="data row8 col1">+0.00%</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>This analysis built logistic regression models to predict competitive eBay auctions. The key finding is that while including ClosePrice improves accuracy, it creates a data leakage problem since ClosePrice is only known after an auction ends. The practical model (without ClosePrice) should be used for real-world predictions.</p>
<section id="advantages-of-removing-closeprice" class="level3">
<h3 class="anchored" data-anchor-id="advantages-of-removing-closeprice">Advantages of Removing ClosePrice</h3>
<p>While the model without ClosePrice has lower accuracy, removing this variable provides several important advantages:</p>
<ol type="1">
<li><p><strong>Eliminates Data Leakage:</strong> ClosePrice is determined by the auction outcome itself. By removing it, we ensure our model only uses information that would be available BEFORE the auction concludes, making predictions legitimate and unbiased.</p></li>
<li><p><strong>Enables Real-Time Predictions:</strong> Without ClosePrice, the model can be deployed to predict competitiveness for NEW auctions as soon as they are listed. Sellers can use this to make informed decisions about their listings before any bids are placed.</p></li>
<li><p><strong>Honest Performance Evaluation:</strong> The accuracy of the model without ClosePrice reflects the TRUE predictive power we can expect in practice. The inflated accuracy from including ClosePrice was misleading and would not generalize to real-world applications.</p></li>
<li><p><strong>Proper Causal Interpretation:</strong> The remaining predictors (OpenPrice, Duration, Category, etc.) represent genuine factors that INFLUENCE competitiveness, rather than variables that are CAUSED BY competitiveness. This maintains the correct causal direction for prediction.</p></li>
<li><p><strong>Actionable Business Insights:</strong> The model now identifies factors that sellers can actually control or consider when listing items (e.g., starting price, auction duration, listing day), providing actionable recommendations for maximizing auction competitiveness.</p></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>